<features>
    <repository>mvn:org.apache.felix.karaf/apache-felix-karaf/1.6.0/xml/features</repository>
    
    <feature name="transaction" version="1.0.0"> 
        <bundle>mvn:org.apache.aries.transaction/org.apache.aries.transaction.manager/0.1-incubating</bundle>
    </feature>
    
    <feature name="spring" version="${spring-version}">
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.aopalliance/1.0_3</bundle> 
        <bundle>mvn:org.springframework/spring-core/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-beans/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-aop/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-context/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-context-support/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-asm/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-expression/${spring-version}</bundle>
    </feature>
    
    <feature name="spring-dm" version="1.2.1"> 
        <feature version="${spring-version}">spring</feature> 
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.cglib/2.1_3_4</bundle> 
        <bundle>mvn:org.springframework.osgi/spring-osgi-io/1.2.0</bundle> 
        <bundle>mvn:org.springframework.osgi/spring-osgi-core/1.2.0</bundle> 
        <bundle>mvn:org.springframework.osgi/spring-osgi-extender/1.2.0</bundle> 
        <bundle>mvn:org.springframework.osgi/spring-osgi-annotation/1.2.0</bundle> 
        <bundle>mvn:org.apache.felix.karaf.deployer/org.apache.felix.karaf.deployer.spring/1.7.0-SNAPSHOT</bundle> 
    </feature>     
        
    <feature name="activemq" version="${activemq-version}">
        <bundle>mvn:org.apache.geronimo.specs/geronimo-annotation_1.0_spec/1.1.1</bundle>
        <bundle>mvn:org.apache.geronimo.specs/geronimo-jta_1.1_spec/1.1.1</bundle> 
        <bundle>mvn:org.apache.geronimo.specs/geronimo-jms_1.1_spec/1.1.1</bundle> 
        <bundle>mvn:org.apache.geronimo.specs/geronimo-j2ee-management_1.1_spec/1.0.1</bundle> 
        <bundle>mvn:commons-pool/commons-pool/${commons-pool-version}</bundle> 
        <bundle>mvn:commons-collections/commons-collections/${commons-collections-version}</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-lang/2.4_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.oro/2.0.8_3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.velocity/1.6.2_3</bundle>
        <bundle>mvn:org.apache.activemq/activemq-core/${activemq-version}</bundle> 
        <bundle>mvn:org.apache.activemq/kahadb/${activemq-version}</bundle> 
        <bundle>mvn:org.apache.activemq/activemq-console/${activemq-version}</bundle> 
        <bundle>mvn:org.apache.activemq/activemq-pool/${activemq-version}</bundle> 
        <bundle>mvn:org.apache.servicemix.activemq/org.apache.servicemix.activemq.commands/4.1.0-SNAPSHOT</bundle> 
    </feature>

    <feature name="activemq-spring" version="${activemq-version}">
        <feature version="1.2.1">spring-dm</feature> 
        <feature version="${activemq-version}">activemq</feature> 
        <bundle>mvn:org.apache.xbean/xbean-spring/${xbean-version}</bundle> 
    </feature>

    <feature name="activemq-blueprint" version="${activemq-version}">
        <feature version="${activemq-version}">activemq</feature> 
        <bundle>mvn:org.apache.servicemix.specs/org.apache.servicemix.specs.scripting-api-1.0/1.5.0</bundle>
        <bundle>mvn:org.apache.commons/commons-jexl/2.0.1</bundle>
        <bundle>mvn:org.apache.xbean/xbean-blueprint/${xbean-version}</bundle> 
        <bundle>mvn:org.apache.activemq/activemq-blueprint/${activemq-version}</bundle> 
    </feature>
    
    <!-- do "features:install war" before installing this one  -->
    <feature name="activemq-web-console" version="${activemq-version}">
        <feature version="${activemq-version}">activemq-spring</feature> 
        <bundle>mvn:org.springframework/spring-web/${spring-version}</bundle>
        <bundle>mvn:org.springframework/spring-webmvc/${spring-version}</bundle>
        <bundle>mvn:org.apache.activemq/activemq-camel/${activemq-version}</bundle>
        <bundle>mvn:org.apache.activemq/activemq-web/${activemq-version}</bundle>
        <bundle>war:mvn:org.apache.activemq/activemq-web-console/${activemq-version}/war?Webapp-Context=activemq-web-console</bundle>
    </feature>
</features>